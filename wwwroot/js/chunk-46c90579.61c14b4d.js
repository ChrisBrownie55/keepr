(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46c90579"],{"0937":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("outline-button",t._g(t._b({staticClass:"flat-button"},"outline-button",t.$attrs,!1),t.$listeners),[t._t("default")],2)},a=[],s=i("8926"),o={name:"flat-button",components:{OutlineButton:s["a"]}},r=o,l=(i("a4b4"),i("2877")),c=Object(l["a"])(r,n,a,!1,null,"59e9ab68",null);c.options.__file="FlatButton.vue";e["a"]=c.exports},"18ca":function(t,e,i){"use strict";var n=i("5fe2"),a=i.n(n);a.a},"1fc4":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",t._g({staticClass:"floating-action-button"},t.listeners),[t._t("prepend"),t.icon?i("base-icon",[t._v(t._s(t.icon))]):t._e(),t._t("default")],2)},a=[],s={name:"floating-action-button",props:{icon:String,to:[Object,String]},computed:{listeners(){const t={...this.$listeners};if(this.$props.to){const e=this.$router;t["click"]=(()=>e.push(this.$props.to))}return t}}},o=s,r=(i("18ca"),i("2877")),l=Object(r["a"])(o,n,a,!1,null,"cdaff7d2",null);l.options.__file="FloatingActionButton.vue";e["a"]=l.exports},2632:function(t,e,i){"use strict";var n=i("879e"),a=i.n(n);a.a},"2b47":function(t,e,i){"use strict";var n=i("a46d"),a=i.n(n);a.a},5258:function(t,e,i){},"5fe2":function(t,e,i){},8675:function(t,e,i){},"879e":function(t,e,i){},8926:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("base-button",t._g(t._b({staticClass:"outline-button"},"base-button",t.$attrs,!1),t.$listeners),[t._t("default")],2)},a=[],s={name:"outline-button"},o=s,r=(i("f879"),i("2877")),l=Object(r["a"])(o,n,a,!1,null,"5ede32f2",null);l.options.__file="OutlineButton.vue";e["a"]=l.exports},a132:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"toggle input"},[i("input",t._g(t._b({attrs:{type:"checkbox",id:t.id}},"input",t.attrs,!1),t.listeners)),i("label",{attrs:{for:t.id}}),t.label?i("p",{staticClass:"label"},[t._v(t._s(t.label))]):t._e(),t.hint?i("p",{staticClass:"hint"},[t._v(t._s(t.hint))]):t._e()])},a=[];let s=0;var o={name:"toggle-input",inheritAttrs:!1,props:{label:String,hint:String},computed:{listeners(){return{...this.$listeners,change:t=>this.$emit("input",t.target.checked)}},attrs(){const t={...this.$attrs};return t.value&&(t.checked=t.value),t}},created(){this.id=`toggle-input-${s++}`}},r=o,l=(i("2b47"),i("2877")),c=Object(l["a"])(r,n,a,!1,null,"5a56dddc",null);c.options.__file="ToggleInput.vue";e["a"]=c.exports},a46d:function(t,e,i){},a4b4:function(t,e,i){"use strict";var n=i("8675"),a=i.n(n);a.a},b126:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("flat-button",t._g(t._b({staticClass:"icon-button"},"flat-button",t.$attrs,!1),t.$listeners),[t.icon?i("base-icon",[t._v(t._s(t.icon))]):t._e(),t.iconHTML?i("div",{staticClass:"custom-html",domProps:{innerHTML:t._s(t.iconHTML)}}):t._e(),t._t("default")],2)},a=[],s=i("0937"),o={name:"icon-button",props:{icon:{type:String},iconHTML:{type:String}},components:{FlatButton:s["a"]}},r=o,l=(i("e824"),i("2877")),c=Object(l["a"])(r,n,a,!1,null,"0408d754",null);c.options.__file="IconButton.vue";e["a"]=c.exports},b3ba:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page keep-page"},[i("transition",{attrs:{name:"fade"}},[t.keep.id?i("section",{staticClass:"keep"},[i("header",[i("img",{staticClass:"image",attrs:{src:t.keep.img}}),i("div",{staticClass:"actions"},[t.user.id?[t.inVault?i("icon-button",{attrs:{title:"Remove from vault",icon:"remove"},on:{click:function(e){return e.stopPropagation(),t.removeFromVault(e)}}}):i("icon-button",{attrs:{title:"Store in vault",icon:"add"},on:{click:function(e){e.stopPropagation(),t.openDialog()}}}),t.user.id===t.keep.userId&&t.keep.isPrivate?i("icon-button",{attrs:{title:"Delete",icon:"delete"},on:{click:function(e){e.stopPropagation(),t.deleteKeep(t.id)}}}):t._e()]:t._e(),i("icon-button",{attrs:{title:"Share on twitter",iconHTML:t.twitterIcon},on:{click:function(e){return e.stopPropagation(),t.share(e)}}})],2),i("transition",{attrs:{name:"fade"}},[t.dialogOpen?i("form",{ref:"dialog",staticClass:"dialog",on:{click:function(t){t.stopPropagation()},submit:function(e){return e.preventDefault(),t.addToVault(e)}}},[i("h2",{staticStyle:{"margin-bottom":"0.5rem"}},[t._v("Store keep in vault")]),t.vaults.length?i("select",{directives:[{name:"model",rawName:"v-model",value:t.vaultId,expression:"vaultId"}],staticStyle:{"font-size":"1rem",cursor:"pointer","border-radius":"4px",padding:"0.15rem 0.35rem"},attrs:{required:""},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.vaultId=e.target.multiple?i:i[0]}}},[i("option",{attrs:{selected:"",disabled:"",value:""}},[t._v("Please select a vault")]),t._l(t.vaults,function(e){return i("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                "+t._s(e.name)+"\n              ")])})],2):t._e(),t.vaults.length?i("outline-button",{staticStyle:{"margin-top":"0.5rem"},attrs:{type:"submit"}},[t._v("Store in vault")]):i("p",[t._v("You need to create a vault first.")])],1):t._e()])],1),i("main",[i("h2",{staticClass:"name"},[t._v(t._s(t.keep.name))]),i("p",{staticClass:"description"},[t._v(t._s(t.keep.description))]),i("div",{staticClass:"stats"},[i("div",{attrs:{title:"views"}},[i("base-icon",[t._v("remove_red_eye")]),i("p",[t._v(t._s(t.keep.views))])],1),i("div",{attrs:{title:"shares"}},[i("base-icon",[t._v("share")]),i("p",[t._v(t._s(t.keep.shares))])],1),i("div",{attrs:{title:"keeps"}},[i("i",{domProps:{innerHTML:t._s(t.keepIcon)}}),i("p",[t._v(t._s(t.keep.keeps))])])])])]):t._e()]),i("transition-group",{attrs:{name:"fade",mode:"out-in"}},[t.editing?i("form",{key:"form",ref:"editForm",staticClass:"edit-form",on:{submit:function(e){return e.preventDefault(),t.saveEdits(e)}}},[i("h2",{staticStyle:{"margin-bottom":"0.5rem"},attrs:{align:"center"}},[t._v("Edit keep")]),i("base-input",{attrs:{type:"text",name:"name",value:t.modifiedKeep.name,label:"Name",placeholder:"Fast cars",hint:"Maximum length is 20 characters.",maxlength:"20"},model:{value:t.modifiedKeep.name,callback:function(e){t.$set(t.modifiedKeep,"name",e)},expression:"modifiedKeep.name"}}),i("base-input",{attrs:{type:"text",name:"description",value:t.modifiedKeep.description,label:"Description",placeholder:"A racing car photo.",maxlength:"255"},model:{value:t.modifiedKeep.description,callback:function(e){t.$set(t.modifiedKeep,"description",e)},expression:"modifiedKeep.description"}}),i("base-input",{attrs:{type:"url",name:"image",value:t.modifiedKeep.img,label:"Image URL",placeholder:"https://example.com/example-img.jpg"},model:{value:t.modifiedKeep.img,callback:function(e){t.$set(t.modifiedKeep,"img",e)},expression:"modifiedKeep.img"}}),i("toggle-input",{attrs:{label:"Private",hint:"Once public, you can't go back.",value:t.modifiedKeep.isPrivate},model:{value:t.modifiedKeep.isPrivate,callback:function(e){t.$set(t.modifiedKeep,"isPrivate",e)},expression:"modifiedKeep.isPrivate"}}),i("div",{staticClass:"actions"},[i("outline-button",{attrs:{type:"submit"}},[t._v("Save")]),i("flat-button",{attrs:{type:"button"},on:{click:function(e){t.cancelEdit()}}},[t._v("Cancel")])],1)],1):t._e(),t.user.id==t.keep.userId&&!t.editing&&t.keep.isPrivate?i("floating-action-button",{key:"fab",attrs:{icon:"edit"},on:{click:t.openEdit}}):t._e()],1)],1)},a=[],s=i("2f62"),o=i("a132"),r=i("1fc4"),l=i("b126"),c=i("8926"),u=i("0937");function p(t,e){while(e&&!t(e))e=e.parentNode;return e}var d={name:"Keep",props:{id:{required:!0}},data(){return{keep:{},modifiedKeep:{},editing:!1,keepIcon:'\n        <svg aria-hidden="true" data-prefix="fab" data-icon="kickstarter-k" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="svg-inline--fa fa-kickstarter-k fa-w-12 fa-2x"><path fill="currentColor" d="M147.3 114.4c0-56.2-32.5-82.4-73.4-82.4C26.2 32 0 68.2 0 113.4v283c0 47.3 25.3 83.4 74.9 83.4 39.8 0 72.4-25.6 72.4-83.4v-76.5l112.1 138.3c22.7 27.2 72.1 30.7 103.2 0 27-27.6 27.3-67.4 7.4-92.2l-90.8-114.8 74.9-107.4c17.4-24.7 17.5-63.1-10.4-89.8-30.3-29-82.4-31.6-113.6 12.8L147.3 185v-70.6z" class=""></path></svg>\n      ',twitterIcon:'\n        <svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 300.00006 244.18703" height="244.18703" width="300.00006">\n          <g transform="translate(-539.17946,-568.85777)">\n            <path d="m 633.89823,812.04479 c 112.46038,0 173.95627,-93.16765 173.95627,-173.95625 0,-2.64628 -0.0539,-5.28062 -0.1726,-7.90305 11.93799,-8.63016 22.31446,-19.39999 30.49762,-31.65984 -10.95459,4.86937 -22.74358,8.14741 -35.11071,9.62551 12.62341,-7.56929 22.31446,-19.54304 26.88583,-33.81739 -11.81284,7.00307 -24.89517,12.09297 -38.82383,14.84055 -11.15723,-11.88436 -27.04079,-19.31655 -44.62892,-19.31655 -33.76374,0 -61.14426,27.38052 -61.14426,61.13233 0,4.79784 0.5364,9.46458 1.58538,13.94057 -50.81546,-2.55686 -95.87353,-26.88582 -126.02546,-63.87991 -5.25082,9.03545 -8.27852,19.53111 -8.27852,30.73006 0,21.21186 10.79366,39.93837 27.20766,50.89296 -10.03077,-0.30992 -19.45363,-3.06348 -27.69044,-7.64676 -0.009,0.25652 -0.009,0.50661 -0.009,0.78077 0,29.60957 21.07478,54.3319 49.0513,59.93435 -5.13757,1.40062 -10.54335,2.15158 -16.12196,2.15158 -3.93364,0 -7.76596,-0.38716 -11.49099,-1.1026 7.78383,24.2932 30.35457,41.97073 57.11525,42.46543 -20.92578,16.40207 -47.28712,26.17062 -75.93712,26.17062 -4.92898,0 -9.79834,-0.28036 -14.58427,-0.84634 27.05868,17.34379 59.18936,27.46396 93.72193,27.46396"/>\n          </g>\n        </svg>\n      ',dialogOpen:!1,vaultId:""}},computed:{...Object(s["c"])("auth",["user"]),...Object(s["c"])("vaults",["vaults","vaultKeeps"]),inVault(){return!!this.vaultKeeps[this.$props.id]}},methods:{...Object(s["b"])("vaults",["getVaults","addKeepToVault","removeKeepFromVault"]),...Object(s["b"])("keeps",["getKeep","shareKeep","deleteKeep","editKeep"]),...Object(s["b"])("snacks",["notify"]),addToVault(){this.addKeepToVault({vaultId:this.vaultId,keep:this.keep}).then(t=>t&&++this.keep.keeps),this.closeDialog()},removeFromVault(){this.removeKeepFromVault(this.id).then(t=>t&&--this.keep.keeps)},async share(){window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(window.location.href)}`);const t=await this.shareKeep(this.$props.id);t&&(this.keep.shares=t)},async init(){this.keep=await this.getKeep(this.$props.id),this.keep.id?this.modifiedKeep={...this.keep}:this.$router.push({name:"home"}),this.vaults.length||this.getVaults()},async saveEdits(){this.editing=!1;const t=await this.editKeep(this.modifiedKeep);t?(this.notify({message:"Keep updated!",type:"info"}),this.keep={...this.modifiedKeep}):(this.notify({message:"Unable to update keep.",type:"error"}),this.modifiedKeep={...this.keep})},openEdit(t){document.body.click(),this.editing=!0},cancelEdit(t){t&&p(t=>"FORM"===t.tagName,t.target)===this.$refs.editForm||(this.editing=!1,this.modifiedKeep={...this.keep})},openDialog(t){this.vaults.length||this.getVaults(),document.body.click(),this.dialogOpen=!0},closeDialog(t){t&&t.target===this.$refs.dialog||(this.dialogOpen=!1,this.vaultId="")}},mounted(){this.init()},watch:{"$props.id":"init",dialogOpen(t){t?document.body.addEventListener("click",this.closeDialog):document.body.removeEventListener("click",this.closeDialog)},editing(t){t?document.body.addEventListener("click",this.cancelEdit):document.body.removeEventListener("click",this.cancelEdit)}},components:{ToggleInput:o["a"],FloatingActionButton:r["a"],IconButton:l["a"],OutlineButton:c["a"],FlatButton:u["a"]}},m=d,v=(i("2632"),i("2877")),f=Object(v["a"])(m,n,a,!1,null,"ccac4eae",null);f.options.__file="Keep.vue";e["default"]=f.exports},e824:function(t,e,i){"use strict";var n=i("5258"),a=i.n(n);a.a},f795:function(t,e,i){},f879:function(t,e,i){"use strict";var n=i("f795"),a=i.n(n);a.a}}]);
//# sourceMappingURL=chunk-46c90579.61c14b4d.js.map